import{r,j as e,H as W,F as $,c as P}from"./Header-C_W8iddl.js";import{c as C,d as I,o as y,s as F,b as R}from"./firebase-BmF8jbnI.js";const J="/assets/admin-img-JgrCVMCw.jpg",q="/assets/after-login-svuaOTU_.png",H=()=>{const[u,m]=r.useState(""),[g,x]=r.useState(""),[j,p]=r.useState(!1),[L,i]=r.useState(""),[h,f]=r.useState(!1),[S,b]=r.useState([]),[v,w]=r.useState([]),[E,k]=r.useState(!1),[O,D]=r.useState(!1);r.useEffect(()=>{h||(m(""),x(""),p(!1),i(""))},[h]);const T=()=>{k(!0);const s=C(I,"users");return y(s,a=>{const o=a.docs.map(t=>({id:t.id,...t.data()})).sort((t,n)=>{const d=t.createdDate&&t.createdTime,c=n.createdDate&&n.createdTime;if(!d&&c)return 1;if(d&&!c)return-1;if(!d&&!c)return 0;const N=new Date(`${t.createdDate} ${t.createdTime}`);return new Date(`${n.createdDate} ${n.createdTime}`)-N});b(o),sessionStorage.setItem("usersData",JSON.stringify(o)),k(!1)},a=>{console.error("Error fetching users:",a),i("Failed to fetch users data."),k(!1)})},B=()=>{D(!0);const s=C(I,"bulkorders");return y(s,a=>{const o=a.docs.map(t=>({id:t.id,...t.data()})).sort((t,n)=>{const d=t.createdDate&&t.createdTime,c=n.createdDate&&n.createdTime;if(!d&&c)return 1;if(d&&!c)return-1;if(!d&&!c)return 0;const N=new Date(`${t.createdDate} ${t.createdTime}`);return new Date(`${n.createdDate} ${n.createdTime}`)-N});w(o),sessionStorage.setItem("bulkOrdersData",JSON.stringify(o)),D(!1)},a=>{console.error("Error fetching bulk orders:",a),i("Failed to fetch bulk orders data."),D(!1)})},A=async s=>{if(s.preventDefault(),i(""),!u||!g){i("Email and password are required.");return}try{await F(R,u,g),sessionStorage.setItem("isLoggedIn","true"),f(!0)}catch(l){i(l.message)}},M=()=>{m(""),x(""),p(!1),i(""),f(!1),b([]),w([]),sessionStorage.removeItem("isLoggedIn"),sessionStorage.removeItem("usersData"),sessionStorage.removeItem("bulkOrdersData"),window.location.reload()};return r.useEffect(()=>{const s=sessionStorage.getItem("isLoggedIn")==="true";f(s);let l=()=>{},a=()=>{};if(s){const o=sessionStorage.getItem("usersData"),t=sessionStorage.getItem("bulkOrdersData");o&&t?(b(JSON.parse(o)),w(JSON.parse(t))):(l=T(),a=B())}return()=>{l(),a()}},[h]),e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx("div",{className:"login-page",children:h?e.jsxs("div",{className:"admin-dashboard",children:[e.jsx("div",{className:"after-login-img",children:e.jsx("img",{className:"login-image",src:q,alt:"image"})}),e.jsx("h2",{children:"Welcome, Admin!"}),e.jsx("h3",{className:"py-3",children:"Contact Info"}),E?e.jsx("p",{children:"Loading users..."}):S.length===0?e.jsx("p",{children:"No users found."}):e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Mobile No"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Created Date"}),e.jsx("th",{children:"Created Time"})]})}),e.jsx("tbody",{children:S.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.userName||"-"}),e.jsx("td",{children:s.email||"-"}),e.jsx("td",{children:s.mobileNo||"-"}),e.jsx("td",{children:s.message||"-"}),e.jsx("td",{children:s.createdDate||"-"}),e.jsx("td",{children:s.createdTime||"-"})]},s.id))})]})}),e.jsx("h3",{className:"py-3",children:"Bulk Orders"}),O?e.jsx("p",{children:"Loading bulk orders..."}):v.length===0?e.jsx("p",{children:"No bulk orders found."}):e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Contact Info"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Special Request"}),e.jsx("th",{children:"Created Date"}),e.jsx("th",{children:"Created Time"})]})}),e.jsx("tbody",{children:v.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.address||"-"}),e.jsx("td",{children:s.contactInfo||"-"}),e.jsx("td",{children:s.quantity||"-"}),e.jsx("td",{children:s.specialRequest||"-"}),e.jsx("td",{children:s.createdDate||"-"}),e.jsx("td",{children:s.createdTime||"-"})]},s.id))})]})}),e.jsx("button",{onClick:M,className:"btn-logout",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"login-img",children:e.jsx("img",{className:"login-image",src:J,alt:"image"})}),e.jsxs("div",{className:"login-card",children:[e.jsx("h2",{className:"title",children:"Admin Login"}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:u,autoComplete:"off",onChange:s=>m(s.target.value),placeholder:"Enter email"})]}),e.jsxs("div",{className:"input-group d-flex flex-column",children:[e.jsx("label",{children:"Password"}),e.jsxs("div",{className:"password-wrapper",children:[e.jsx("input",{type:j?"text":"password",value:g,autoComplete:"off",onChange:s=>x(s.target.value),placeholder:"Enter password","aria-label":"Password"}),e.jsx("button",{type:"button",className:"toggle-password",onClick:()=>p(s=>!s),"aria-label":j?"Hide password":"Show password",children:j?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("path",{d:"M3 3L21 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.58 10.58A3 3 0 1113.42 13.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2.3 12.03C3.86 7.86 7.8 5 12 5c1.5 0 2.93.34 4.2.95",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.8 11.97C18.24 16.14 14.3 19 10.1 19c-1.5 0-2.93-.34-4.2-.95",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),L&&e.jsx("p",{className:"error",children:L}),e.jsx("button",{type:"submit",className:"btn-login",children:"Login"})]})]})]})}),e.jsx($,{})]})};function z(){return e.jsx(H,{})}P.createRoot(document.getElementById("root")).render(e.jsx(z,{}));
