import{r,j as e,H as Q,F as V,c as _}from"./Header-BO3tASJE.js";/* empty css               */import"./loader-DFfgq4s3.js";import{c as P,d as L,o as W,s as G,b as K,e as X,f as Y}from"./firebase-Dtrs02c3.js";const Z="/assets/admin-img-JgrCVMCw.jpg",ee="/assets/after-login-svuaOTU_.png",se=()=>{const[g,p]=r.useState(""),[f,b]=r.useState(""),[k,w]=r.useState(!1),[C,d]=r.useState(""),[h,D]=r.useState(!1),[I,u]=r.useState([]),[y,m]=r.useState([]),[M,N]=r.useState(!1),[U,S]=r.useState(!1),[$,O]=r.useState(!1),[x,E]=r.useState(null),[j,T]=r.useState("");r.useEffect(()=>{h||(p(""),b(""),w(!1),d(""))},[h]);const F=()=>{N(!0);const s=P(L,"users");return W(s,n=>{const i=n.docs.map(t=>({id:t.id,...t.data()})).sort((t,o)=>{const l=t.createdDate&&t.createdTime,c=o.createdDate&&o.createdTime;if(!l&&c)return 1;if(l&&!c)return-1;if(!l&&!c)return 0;const v=new Date(`${t.createdDate} ${t.createdTime}`);return new Date(`${o.createdDate} ${o.createdTime}`)-v});u(i),sessionStorage.setItem("usersData",JSON.stringify(i)),N(!1)},n=>{console.error("Error fetching users:",n),d("Failed to fetch users data."),N(!1)})},R=()=>{S(!0);const s=P(L,"bulkorders");return W(s,n=>{const i=n.docs.map(t=>({id:t.id,...t.data()})).sort((t,o)=>{const l=t.createdDate&&t.createdTime,c=o.createdDate&&o.createdTime;if(!l&&c)return 1;if(l&&!c)return-1;if(!l&&!c)return 0;const v=new Date(`${t.createdDate} ${t.createdTime}`);return new Date(`${o.createdDate} ${o.createdTime}`)-v});m(i),sessionStorage.setItem("bulkOrdersData",JSON.stringify(i)),S(!1)},n=>{console.error("Error fetching bulk orders:",n),d("Failed to fetch bulk orders data."),S(!1)})},J=async s=>{if(s.preventDefault(),d(""),!g||!f){d("Email and password are required.");return}try{await G(K,g,f),sessionStorage.setItem("isLoggedIn","true"),D(!0)}catch(a){d(a.message)}},q=()=>{p(""),b(""),w(!1),d(""),D(!1),u([]),m([]),sessionStorage.removeItem("isLoggedIn"),sessionStorage.removeItem("usersData"),sessionStorage.removeItem("bulkOrdersData"),window.location.href=window.location.pathname};r.useEffect(()=>{const s=sessionStorage.getItem("isLoggedIn")==="true";D(s);let a=()=>{},n=()=>{};if(s){const i=sessionStorage.getItem("usersData"),t=sessionStorage.getItem("bulkOrdersData");i&&t?(u(JSON.parse(i)),m(JSON.parse(t))):(a=F(),n=R())}return()=>{a(),n()}},[h]);const B=(s,a)=>{E(s),T(a),O(!0)},A=()=>{O(!1),E(null),T("")},H=async()=>{if(!(!x||!j)){try{await X(Y(L,j,x.id)),j==="users"?(sessionStorage.removeItem("usersData"),u(s=>s.filter(a=>a.id!==x.id))):j==="bulkorders"&&(sessionStorage.removeItem("bulkOrdersData"),m(s=>s.filter(a=>a.id!==x.id)))}catch(s){console.error("Delete failed",s)}A()}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsx("div",{className:"login-page",children:h?e.jsxs("div",{className:"admin-dashboard",children:[e.jsx("div",{className:"after-login-img",children:e.jsx("img",{className:"login-image",src:ee,alt:"image"})}),e.jsx("h2",{children:"Welcome, Admin!"}),e.jsx("h3",{className:"py-3",children:"Contact Info"}),M?e.jsx("p",{children:"Loading users..."}):I.length===0?e.jsx("p",{children:"No users found."}):e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Mobile No"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Created Date"}),e.jsx("th",{children:"Created Time"}),e.jsx("th",{className:"text-center",children:"Delete"})]})}),e.jsx("tbody",{children:I.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.userName||"-"}),e.jsx("td",{children:s.email||"-"}),e.jsx("td",{children:s.mobileNo||"-"}),e.jsx("td",{children:s.message||"-"}),e.jsx("td",{children:s.createdDate||"-"}),e.jsx("td",{children:s.createdTime||"-"}),e.jsx("td",{className:"col-delete",children:e.jsx("button",{className:"delete-icon",onClick:()=>B(s,"users"),children:"ðŸ—‘ï¸"})})]},s.id))})]})}),e.jsx("h3",{className:"py-3",children:"Bulk Orders"}),U?e.jsx("p",{children:"Loading bulk orders..."}):y.length===0?e.jsx("p",{children:"No bulk orders found."}):e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Contact Info"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Special Request"}),e.jsx("th",{children:"Created Date"}),e.jsx("th",{children:"Created Time"}),e.jsx("th",{className:"text-center",children:"Delete"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.address||"-"}),e.jsx("td",{children:s.contactInfo||"-"}),e.jsx("td",{children:s.quantity||"-"}),e.jsx("td",{children:s.specialRequest||"-"}),e.jsx("td",{children:s.createdDate||"-"}),e.jsx("td",{children:s.createdTime||"-"}),e.jsx("td",{className:"col-delete",children:e.jsx("button",{className:"delete-icon",onClick:()=>B(s,"bulkorders"),children:"ðŸ—‘ï¸"})})]},s.id))})]})}),e.jsx("button",{onClick:q,className:"btn-logout",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"login-img",children:e.jsx("img",{className:"login-image",src:Z,alt:"image"})}),e.jsxs("div",{className:"login-card",children:[e.jsx("h2",{className:"title",children:"Admin Login"}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:g,autoComplete:"off",onChange:s=>p(s.target.value),placeholder:"Enter email"})]}),e.jsxs("div",{className:"input-group d-flex flex-column",children:[e.jsx("label",{children:"Password"}),e.jsxs("div",{className:"password-wrapper",children:[e.jsx("input",{type:k?"text":"password",value:f,autoComplete:"off",onChange:s=>b(s.target.value),placeholder:"Enter password","aria-label":"Password"}),e.jsx("button",{type:"button",className:"toggle-password",onClick:()=>w(s=>!s),"aria-label":k?"Hide password":"Show password",children:k?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("path",{d:"M3 3L21 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.58 10.58A3 3 0 1113.42 13.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2.3 12.03C3.86 7.86 7.8 5 12 5c1.5 0 2.93.34 4.2.95",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.8 11.97C18.24 16.14 14.3 19 10.1 19c-1.5 0-2.93-.34-4.2-.95",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),C&&e.jsx("p",{className:"error",children:C}),e.jsx("button",{type:"submit",className:"btn-login",children:"Login"})]})]})]})}),$&&e.jsx("div",{className:"delete-popup-overlay",children:e.jsxs("div",{className:"delete-popup",children:[e.jsx("h2",{children:"Would you like to delete?"}),e.jsxs("div",{className:"popup-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:A,children:"Cancel"}),e.jsx("button",{className:"btn-delete",onClick:H,children:"Delete"})]})]})}),e.jsx(V,{})]})};function te(){return e.jsx(se,{})}_.createRoot(document.getElementById("root")).render(e.jsx(te,{}));
