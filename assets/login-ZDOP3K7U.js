import{r,j as e,H as Q,F as Y,c as G}from"./Header-t0vUWT-p.js";/* empty css               */import"./loader-DFfgq4s3.js";import{c as W,d as y,o as F,s as J,b as K,e as V,f as X}from"./firebase-Dtrs02c3.js";const _="/mugil-elite-mart/assets/admin-checkin-DocaF7FZ.png",ee="/mugil-elite-mart/assets/admin-By6ZPZTY.jpeg",se=()=>{const[j,p]=r.useState(""),[g,f]=r.useState(""),[b,w]=r.useState(!1),[C,o]=r.useState(""),[c,k]=r.useState(!1),[S,h]=r.useState([]),[E,u]=r.useState([]),[$,D]=r.useState(!1),[M,N]=r.useState(!1),[O,I]=r.useState(!1),[m,T]=r.useState(null),[x,B]=r.useState("");r.useEffect(()=>{c||(p(""),f(""),w(!1),o(""))},[c]);const R=()=>{D(!0);const s=W(y,"users");return F(s,n=>{const L=n.docs.map(t=>({id:t.id,...t.data()})).sort((t,i)=>{const l=t.createdDate&&t.createdTime,d=i.createdDate&&i.createdTime;if(!l&&d)return 1;if(l&&!d)return-1;if(!l&&!d)return 0;const v=new Date(`${t.createdDate} ${t.createdTime}`);return new Date(`${i.createdDate} ${i.createdTime}`)-v});h(L),D(!1)},n=>{console.error("Error fetching users:",n),o("Failed to fetch users data."),D(!1)})},U=()=>{N(!0);const s=W(y,"bulkorders");return F(s,n=>{const L=n.docs.map(t=>({id:t.id,...t.data()})).sort((t,i)=>{const l=t.createdDate&&t.createdTime,d=i.createdDate&&i.createdTime;if(!l&&d)return 1;if(l&&!d)return-1;if(!l&&!d)return 0;const v=new Date(`${t.createdDate} ${t.createdTime}`);return new Date(`${i.createdDate} ${i.createdTime}`)-v});u(L),N(!1)},n=>{console.error("Error fetching bulk orders:",n),o("Failed to fetch bulk orders data."),N(!1)})},q=async s=>{if(s.preventDefault(),o(""),!j||!g){o("Email and password are required.");return}try{await J(K,j,g),sessionStorage.setItem("isLoggedIn","true"),k(!0)}catch(a){o(a.message)}},H=()=>{p(""),f(""),w(!1),o(""),k(!1),sessionStorage.setItem("isLoggedIn","false"),h([]),u([]),window.location.href=window.location.pathname};r.useEffect(()=>{const s=sessionStorage.getItem("isLoggedIn")==="true";k(s)},[]),r.useEffect(()=>{let s=()=>{},a=()=>{};if(c)s=R(),a=U();else{h([]),u([]);try{s()}catch{}try{a()}catch{}s=()=>{},a=()=>{}}return()=>{try{s()}catch{}try{a()}catch{}}},[c]);const P=(s,a)=>{T(s),B(a),I(!0)},A=()=>{I(!1),T(null),B("")},Z=async()=>{if(!(!m||!x)){try{await V(X(y,x,m.id)),x==="users"?h(s=>s.filter(a=>a.id!==m.id)):x==="bulkorders"&&u(s=>s.filter(a=>a.id!==m.id))}catch(s){console.error("Delete failed",s)}A()}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),e.jsx("div",{className:"login-page",children:c?e.jsxs("div",{className:"admin-dashboard",children:[e.jsx("div",{className:"after-login-img",children:e.jsx("img",{className:"login-image",src:ee,alt:"image"})}),e.jsx("h2",{children:"Welcome, Admin!"}),e.jsx("h3",{className:"py-3",children:"Contact Info"}),$?e.jsx("p",{children:"Loading users..."}):S.length===0?e.jsx("p",{children:"No users found."}):e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Mobile No"}),e.jsx("th",{children:"Message"}),e.jsx("th",{children:"Created Date"}),e.jsx("th",{children:"Created Time"}),e.jsx("th",{className:"text-center",children:"Delete"})]})}),e.jsx("tbody",{children:S.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.userName||"-"}),e.jsx("td",{children:s.email||"-"}),e.jsx("td",{children:s.mobileNo||"-"}),e.jsx("td",{children:s.message||"-"}),e.jsx("td",{children:s.createdDate||"-"}),e.jsx("td",{children:s.createdTime||"-"}),e.jsx("td",{className:"col-delete",children:e.jsx("button",{className:"delete-icon",onClick:()=>P(s,"users"),children:"ðŸ—‘ï¸"})})]},s.id))})]})}),e.jsx("h3",{className:"py-3",children:"Bulk Orders"}),M?e.jsx("p",{children:"Loading bulk orders..."}):E.length===0?e.jsx("p",{children:"No bulk orders found."}):e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Contact Info"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Special Request"}),e.jsx("th",{children:"Created Date"}),e.jsx("th",{children:"Created Time"}),e.jsx("th",{className:"text-center",children:"Delete"})]})}),e.jsx("tbody",{children:E.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.address||"-"}),e.jsx("td",{children:s.contactInfo||"-"}),e.jsx("td",{children:s.quantity||"-"}),e.jsx("td",{children:s.specialRequest||"-"}),e.jsx("td",{children:s.createdDate||"-"}),e.jsx("td",{children:s.createdTime||"-"}),e.jsx("td",{className:"col-delete",children:e.jsx("button",{className:"delete-icon",onClick:()=>P(s,"bulkorders"),children:"ðŸ—‘ï¸"})})]},s.id))})]})}),e.jsx("button",{onClick:H,className:"btn-logout",children:"Logout"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"login-img",children:e.jsx("img",{className:"login-image",src:_,alt:"image"})}),e.jsxs("div",{className:"login-card",children:[e.jsx("h2",{className:"title",children:"Admin Login"}),e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:j,autoComplete:"off",onChange:s=>p(s.target.value),placeholder:"Enter email"})]}),e.jsxs("div",{className:"input-group d-flex flex-column",children:[e.jsx("label",{children:"Password"}),e.jsxs("div",{className:"password-wrapper",children:[e.jsx("input",{type:b?"text":"password",value:g,autoComplete:"off",onChange:s=>f(s.target.value),placeholder:"Enter password","aria-label":"Password"}),e.jsx("button",{type:"button",className:"toggle-password",onClick:()=>w(s=>!s),"aria-label":b?"Hide password":"Show password",children:b?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("path",{d:"M3 3L21 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10.58 10.58A3 3 0 1113.42 13.42",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2.3 12.03C3.86 7.86 7.8 5 12 5c1.5 0 2.93.34 4.2.95",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.8 11.97C18.24 16.14 14.3 19 10.1 19c-1.5 0-2.93-.34-4.2-.95",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[e.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),C&&e.jsx("p",{className:"error",children:C}),e.jsx("button",{type:"submit",className:"btn-login",children:"Login"})]})]})]})}),O&&e.jsx("div",{className:"delete-popup-overlay",children:e.jsxs("div",{className:"delete-popup",children:[e.jsx("h2",{children:"Would you like to delete?"}),e.jsxs("div",{className:"popup-actions",children:[e.jsx("button",{className:"btn-cancel",onClick:A,children:"Cancel"}),e.jsx("button",{className:"btn-delete",onClick:Z,children:"Delete"})]})]})}),e.jsx(Y,{})]})};function te(){return e.jsx(se,{})}G.createRoot(document.getElementById("root")).render(e.jsx(te,{}));
