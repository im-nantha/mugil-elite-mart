.stacking-cards__container {
  position: relative;
  @media (max-width: 768px) {
    overflow: unset;
  }
}

.stacking-cards {
  --num-cards: 7;

  view-timeline-name: --stack-cards-scroll;
  view-timeline-axis: block;

  position: relative;
}

/* Each card */
.stacking-cards__card {
  margin: 0 auto;
  width: 80vw;
  position: sticky;
  top: 76px;
  --index0: calc(var(--index) - 1);
  --reverse-index: calc(var(--num-cards) - var(--index0));
  --reverse-index0: calc(var(--reverse-index) - 1);
  isolation: isolate;
  z-index: var(--index);

  /* Base spacing */
  margin-bottom: 20px;

  /* Padding animation values */
  --pad-start: 40px;  /* initial padding */
  --pad-end: 10px;    /* final padding */

  @media (max-width: 768px) {
    top: 16px;
    width: 100%;
  }

  .stacking-cards__content {
    transform-origin: center top;

    /* Scroll animation range */
    --start-range: calc((var(--index0) / var(--num-cards)) * 100%);
    --end-range: calc((var(--index) / var(--num-cards)) * 100%);

    /* Scroll-bound animation */
    animation: stack-anim linear forwards;
    animation-timeline: --stack-cards-scroll;
    animation-range: exit-crossing var(--start-range)
                     exit-crossing var(--end-range);

    /* Padding transitions */
    padding-top: var(--pad-start);
    padding-bottom: var(--pad-start);
  }
}

.stacking-cards__image {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 12px;
}

.stacking-cards__body {
  position: absolute;
  bottom: 40%;
  padding: 10px;
  background: rgba(0, 0, 0, 0.6);
  width: 100%;
  text-align: center;

  @media (max-width: 768px) {
    bottom: 25%;
  }

  h2 {
    color: #ffffff;

    @media (max-width: 768px) {
      font-size: 16px;
      line-height: 100%;
    }
  }

  p {
    padding-top: 10px;
    color: #ffffff;

    @media (max-width: 768px) {
      font-size: 14px;
      line-height: 100%;
    }
  }
}

/* --------------------------- */
/* Animation (Scale + Padding) */
/* --------------------------- */
@keyframes stack-anim {
  to {
    /* Smooth scaling based on reverse index */
    transform: scale(calc(1.05 - (0.05 * var(--reverse-index0))));

    /* Smooth padding reduction */
    padding-top: var(--pad-end);
    padding-bottom: var(--pad-end);
  }
}
